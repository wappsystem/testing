<div id=D__ID>
    <script>
        function F__ID(){
            //------------------------------------
            $vm.init(function(){
                $vm.init_status=1;
                if($vm.show_user!=undefined) $vm.show_user();
            })
            //------------------------------------
            window.onmessage=function(e){
                if(e.data.username!=undefined && e.data.token!=undefined){
                    $vm.user_name=e.data.username;
                    $vm.set_token(e.data.token,e.data.username);
                    var api_name="wapp";
                    sessionStorage.setItem(api_name+" token",e.data.token);
                    location.reload(true);
                }
            };
            //------------------------------------
            $vm.auth_signin=function(){
                $vm.signin();
            }
            //------------------------------------
            $vm.auth_signout=function(){
                sessionStorage.clear();
                window.location.href=window.location.href.split('?/')[0];
            }
            //------------------------------------
        }
    </script>
</div>
